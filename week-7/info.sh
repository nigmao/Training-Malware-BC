#!/bin/bash

echo "[Thong tin he thong]"
echo "[+] 1. Ten may: $(hostname)"
echo "[+] 2. Ten ban phan phoi: $(lsb_release -d | cut -f2)"
echo "[+] 3. Phien ban he dieu hanh: $(lsb_release -r | cut -f2)"
echo "[+] 4. Thong tin CPU:"
lscpu | grep "Model name" | sed 's/Model name://g' | tr -s ' '
lscpu | grep "Architecture"
lscpu | grep "CPU MHz"

echo "[+] 5. Thong tin bo nho vat li: $(free -m | awk '/Mem/{print $2}') MB"
echo "[+] 6. O dia con trong: $(df -h --output=avail / | tail -n 1 | tr -s ' ' | cut -d ' ' -f 2) MB"

echo "[+] 7. Danh sach dia chi IP cua he thong:"
ip addr show | grep "inet " | awk '{print $2}'

echo "[+] 8. Danh sach user tren he thong (sap xep theo thu tu abc):"
cat /etc/passwd | cut -d ":" -f 1 | sort

echo "[+] 9. Thong tin cac tien trinh dang chay voi quyen root (sap xep theo thu tu abc):"
ps aux | awk '$1=="root" {print $11}' | sort

echo "[+] 10. Danh sach cac port dang mo (sap xep theo port tang dan):"
netstat -tuln | awk '/^tcp/ {print $4}' | cut -d ":" -f 2 | sort -n

echo "[+] 11. Danh sach cac thu muc tren he thong cho phep other co quyen ghi:"
find / -type d -exec test -w {} \; -print
# find / -type d -exec sh -c 'stat -c "%U %a %n" "$1" | grep "$(whoami)" | grep "w" > /dev/null' _ {} \; -print

echo "[+] 12. Danh sach cac goi phan mem duoc cai tren he thong:"
dpkg --list | grep '^ii' | awk '{print $2, $3}'
